<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-img
        src="assets/images/Logo.png"
        alt="Eco munch logo"
        class="logo"
      ></ion-img>
      <h2 class="logoText">Eco Munch</h2>
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-button (click)="navigateToProfile()">
        <ion-icon
          class="profileLogo"
          size="large"
          name="person-circle"
          color="primary"
        ></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="page-container">
    <h1>What i have in my fridge</h1>
    <ion-searchbar
      class="ion-no-padding"
      placeholder="Filter by ingredients"
      inputmode="decimal"
      type="decimal"
      [debounce]="250"
    ></ion-searchbar>

    <ion-grid class="meal-dish-container">
      <ion-row class="ion-justify-content-center">
        <ion-col size="12" class="dish-title-padding">
          <ion-text color="secondary">
            <h2>Latest meal</h2>
          </ion-text>
        </ion-col>
      </ion-row>

      <ion-row>
        <div *ngFor="let meal of latestMeals">
          <ion-card class="meal-dish-card meal-dish-card-height dish-bg-color">
            <ion-row class="ion-align-items-center full-height">
              <ion-col>
                <ion-img
                  [src]="meal.strMealThumb"
                  alt="{{ meal.strMeal }}"
                  class="rounded-dish-img"
                />
              </ion-col>
              <ion-col class="ion-text-center">
                <ion-card-header>
                  <h3 class="dish-name-text">{{ meal.strMeal }}</h3>
                </ion-card-header>
                <ion-toolbar class="gray-toolbar">
                  <ion-buttons slot="end">
                    <ion-button
                      (click)="favoriteStatus[meal.idMeal] ? removeFavorite(meal) : addFavorite(meal)"
                    >
                      <ion-icon
                        *ngIf="favoriteStatus[meal.idMeal]"
                        name="heart"
                        size="large"
                        color="primary"
                      ></ion-icon>
                      <ion-icon
                        *ngIf="!favoriteStatus[meal.idMeal]"
                        name="heart-outline"
                        size="large"
                        color="primary"
                      ></ion-icon>
                    </ion-button>
                  </ion-buttons>
                </ion-toolbar>
              </ion-col>
            </ion-row>
          </ion-card>
        </div>
      </ion-row>
    </ion-grid>

    <ion-grid class="meal-dish-container">
      <ion-row class="ion-justify-content-center">
        <ion-col size="12" class="dish-title-padding">
          <ion-text color="secondary">
            <h2>Popular meals</h2>
          </ion-text>
        </ion-col>
      </ion-row>

      <swiper-container [autoplay]="{ delay: 30000 }" [speed]="1000">
        <swiper-slide *ngFor="let meal of randomMeal">
          <ion-card class="meal-dish-card meal-dish-card-height dish-bg-color">
            <ion-row class="ion-align-items-center full-height">
              <ion-col>
                <ion-img
                  [src]="meal.strMealThumb"
                  alt="{{ meal.strMeal }}"
                  class="rounded-dish-img"
                />
              </ion-col>
              <ion-col class="ion-text-center">
                <ion-card-header>
                  <h3 class="dish-name-text truncate">{{ truncateMealName(meal.strMeal, 15) }}</h3>
                </ion-card-header>
                <ion-toolbar class="gray-toolbar">
                  <ion-buttons slot="end">
                    <ion-button
                      (click)="favoriteStatus[meal.idMeal] ? removeFavorite(meal) : addFavorite(meal)"
                    >
                      <ion-icon
                        *ngIf="favoriteStatus[meal.idMeal]"
                        name="heart"
                        size="large"
                        color="primary"
                      ></ion-icon>
                      <ion-icon
                        *ngIf="!favoriteStatus[meal.idMeal]"
                        name="heart-outline"
                        size="large"
                        color="primary"
                      ></ion-icon>
                    </ion-button>
                  </ion-buttons>
                </ion-toolbar>
              </ion-col>
            </ion-row>
          </ion-card>
        </swiper-slide>
      </swiper-container>
    </ion-grid>
  </div>
</ion-content>
